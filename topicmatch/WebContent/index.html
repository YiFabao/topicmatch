<!DOCTYPE html>
<html>
<head>
<meta charset=UTF-8>
<title>Tomcat WebSocket Chat</title>
<script>
var ws = new WebSocket('ws://localhost:8080/topicmatch/WebSocketServlet?userId=1');

ws.onopen = function(){
    document.getElementById("chatlog").textContent += "websocket connected. \n";
};

ws.onmessage = function(message){
    document.getElementById("chatlog").textContent += message.data + "\n";
};

ws.onclose = function() {
    document.getElementById("chatlog").textContent += "websocket closed. \n";
}

function postToServer(){
    ws.send(document.getElementById("msg").value);
    document.getElementById("msg").value = "";
}

function closeConnect(){
    ws.close();
}
</script>
</head>
<body>
<textarea id="chatlog" readonly></textarea><br/>
<input id="msg" type="text" />
<button type="submit" id="sendButton" onClick="postToServer()">Send!</button>
<button type="submit" id="sendButton" onClick="closeConnect()">End</button>
</body>
</html>
